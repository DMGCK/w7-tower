import{h as E,x as b,D as k,c as l,a as p,o as c,b as r,d as t,n as w,t as d,g as _,e as A,F as h,E as f,y as S,z as D,A as I,q as B,s as T,G as u}from"./vendor.e00ce540.js";import{_ as j,c as F,P as m,e as v,A as i}from"./index.f8e58e83.js";const V={setup(){const s=E(),a=b({eventId:`${s.params.id}`});return k(async()=>{try{await v.getOne(s.params.id),await v.getTicketsByEvent(s.params.id),await v.getCommentsByEvent(s.params.id)}catch(n){m.toast(n,"error"),console.error(n)}}),{comment:a,event:l(()=>i.activeEvent),tickets:l(()=>i.activeTickets),comments:l(()=>i.comments),account:l(()=>i.account),isAttending:l(()=>{const n=i.activeTickets.find(e=>e.accountId==i.account.id);return!!(n==null?void 0:n.id)}),async postComment(){console.log(a.value.body,"-commenting-");try{await F.postComment(a.value)}catch(n){m.toast(n,"error"),console.error(n)}},async cancelEvent(){try{await v.cancelEvent(s.params.id),m.toast("Event Cancelled")}catch(n){m.toast(n,"error"),console.error(n)}},async attendEvent(){try{await v.attendEvent(s.params.id,i.account.id)}catch(n){m.toast(n,"error"),console.error(n)}}}}},y=s=>(B("data-v-00344215"),s=s(),T(),s),z={class:"row p-2"},L={class:"col-12 d-flex flex-column my-2"},N={class:"over-top d-flex justify-content-between"},G={class:"p-4"},M={class:"d-flex flex-column justify-content-center p-2"},O={class:"over-bottom p-3 d-flex"},P={class:"my-4 px-3 align-middle"},q={class:"my-4 px-3 align-middle"},R={class:"d-flex"},U=y(()=>t("p",{class:"my-4 px-3 align-middle"},"Organized By",-1)),W={class:"my-4 px-3 align-middle"},H={class:"my-4 px-3 align-middle"},J={key:0,class:"my-4 px-3 align-middle"},K=y(()=>t("h2",null,"Description",-1)),Q={key:0},X=y(()=>t("h3",null,"Who's Going",-1)),Y={class:"d-flex"},Z={class:"my-4"},$=y(()=>t("p",null,"Add a comment",-1)),ee={class:"mb-3"};function te(s,a,n,e,ne,oe){const g=p("Creator"),x=p("Attendee"),C=p("Comment");return c(),r("div",z,[t("div",L,[t("div",{class:"over-container d-flex flex-column justify-content-between mb-4",style:w({"background-image":`url(${e.event.coverImg})`})},[t("div",N,[t("h1",G,d(e.event.name),1),t("div",M,[e.account.id==e.event.creatorId&&e.event.isCanceled!=!0?(c(),r("div",{key:0,title:"Cancel This Event",onClick:a[0]||(a[0]=(...o)=>e.cancelEvent&&e.cancelEvent(...o)),class:"btn btn-danger"},"Cancel this event")):_("",!0),!e.event.isCanceled&&e.event.capacity!=0&&!e.isAttending?(c(),r("div",{key:1,title:"Attend This Event",onClick:a[1]||(a[1]=(...o)=>e.attendEvent&&e.attendEvent(...o)),class:"btn btn-warning m-1 border border-secondary"},"Attend this event")):_("",!0)])]),t("div",O,[t("p",P,d(new Date(e.event.startDate).toLocaleDateString()),1),t("p",q,"Type: "+d(e.event.type),1),t("div",R,[U,A(g,{creator:e.event.creator},null,8,["creator"])]),t("p",W,"Capacity: "+d(e.event.capacity),1),t("p",H,"Location: "+d(e.event.location),1),e.event.isCanceled?(c(),r("p",J," This Event is Cancelled")):_("",!0)])],4),K,t("p",null,d(e.event.description),1),e.tickets[0]!=null?(c(),r("div",Q,[X,t("div",Y,[(c(!0),r(h,null,f(e.tickets,o=>(c(),u(x,{key:o.id,creator:o},null,8,["creator"]))),128))])])):_("",!0),t("div",Z,[$,t("form",{onSubmit:a[3]||(a[3]=S((...o)=>e.postComment&&e.postComment(...o),["prevent"]))},[t("div",ee,[D(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=o=>e.comment.body=o),class:"form-control",name:"commentForm",id:"commentForm","aria-describedby":"helpId",placeholder:"Comment text here"},null,512),[[I,e.comment.body]])])],32)]),(c(!0),r(h,null,f(e.comments,o=>(c(),u(C,{key:o.id,comment:o},null,8,["comment"]))),128))])])}var ce=j(V,[["render",te],["__scopeId","data-v-00344215"]]);export{ce as default};
